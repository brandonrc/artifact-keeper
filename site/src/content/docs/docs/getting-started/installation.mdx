---
title: "Installation"
description: "Install Artifact Keeper using Docker Compose or build from source"
---

# Installation

Artifact Keeper can be deployed using Docker Compose for quick setup, or built from source for customization.

## Docker Compose (Recommended)

The easiest way to run Artifact Keeper with all dependencies.

### Full Stack Setup

The included `docker-compose.yml` provides a complete setup:

| Service | Image | Description |
|---------|-------|-------------|
| **Backend** | `ghcr.io/artifact-keeper/artifact-keeper-backend` | Rust API server (45+ format handlers) |
| **Web UI** | `ghcr.io/artifact-keeper/artifact-keeper-web` | Next.js frontend |
| **Caddy** | `caddy:2-alpine` | Reverse proxy with automatic TLS |
| **PostgreSQL** | `postgres:16-alpine` | Metadata database |
| **Meilisearch** | `getmeili/meilisearch:v1.12` | Full-text search |
| **Trivy** | `aquasec/trivy:latest` | Vulnerability scanning |

```bash
git clone https://github.com/artifact-keeper/artifact-keeper.git
cd artifact-keeper
docker compose up -d
```

**Default Ports**:
- Web UI + API: `http://localhost:30080` (HTTP) / `https://localhost:30443` (HTTPS)
- PostgreSQL: `localhost:30432`
- Meilisearch: `localhost:7700`

**First-boot setup**: A random admin password is written to `/data/storage/admin.password` inside the container. The API is locked until you change it. Run `docker exec artifact-keeper-backend cat /data/storage/admin.password && echo` to retrieve it. Set `ADMIN_PASSWORD` in your `.env` to skip the setup lock.

### Environment Configuration

Create a `.env` file in the project root to override defaults:

```bash
# Authentication
JWT_SECRET=generate-a-secure-random-string-here
# ADMIN_PASSWORD=your-secure-password  # Set to skip first-boot setup lock

# Logging
RUST_LOG=info

# Caddy (for production with a real domain)
SITE_ADDRESS=registry.example.com

# Custom ports
HTTP_PORT=30080
HTTPS_PORT=30443
```

Generate secure secrets:

```bash
openssl rand -base64 64   # JWT secret
openssl rand -base64 32   # Admin password
```

## From Source

Build Artifact Keeper from source for development or custom deployments.

### Prerequisites

- **Rust**: 1.75 or later ([install rustup](https://rustup.rs/))
- **PostgreSQL**: 16 or later
- **Git**: For cloning the repository

### Build Backend

```bash
git clone https://github.com/artifact-keeper/artifact-keeper.git
cd artifact-keeper

# Build backend (release mode)
cargo build --release

# Binary will be at: target/release/artifact-keeper
```

### Setup Database

1. **Create PostgreSQL database**:

```sql
CREATE DATABASE artifact_registry;
CREATE USER registry WITH PASSWORD 'your-password';
GRANT ALL PRIVILEGES ON DATABASE artifact_registry TO registry;
```

2. **Run the backend** (migrations run automatically on first start):

```bash
export DATABASE_URL=postgresql://registry:your-password@localhost/artifact_registry
export JWT_SECRET=generate-a-secure-random-string-here
./target/release/artifact-keeper
```

### Configure Environment

Create a `.env` file or set environment variables:

```bash
# Required
DATABASE_URL=postgresql://registry:your-password@localhost/artifact_registry
JWT_SECRET=generate-a-secure-random-string-here

# Optional
HOST=0.0.0.0
PORT=8080
RUST_LOG=info,artifact_keeper=debug
STORAGE_PATH=/var/lib/artifact-keeper/artifacts
ADMIN_PASSWORD=your-secure-password
```

See the [Configuration Reference](/docs/getting-started/configuration) for all available options.

## Production Deployment

### Systemd Service (Linux)

Create `/etc/systemd/system/artifact-keeper.service`:

```ini
[Unit]
Description=Artifact Keeper
After=network.target postgresql.service

[Service]
Type=simple
User=artifact-keeper
WorkingDirectory=/opt/artifact-keeper
EnvironmentFile=/opt/artifact-keeper/.env
ExecStart=/opt/artifact-keeper/artifact-keeper
Restart=always

[Install]
WantedBy=multi-user.target
```

Enable and start:

```bash
sudo systemctl enable artifact-keeper
sudo systemctl start artifact-keeper
sudo systemctl status artifact-keeper
```

### Reverse Proxy

The Docker Compose setup includes Caddy as a reverse proxy with automatic TLS. For production with a real domain:

```bash
# In your .env file
SITE_ADDRESS=registry.example.com
```

Caddy will automatically obtain and renew Let's Encrypt certificates.

## Storage Options

### Filesystem Storage (Default)

Simple and performant for single-node deployments:

```bash
STORAGE_BACKEND=filesystem
STORAGE_PATH=/var/lib/artifact-keeper/artifacts
```

### S3-Compatible Storage

For distributed deployments or cloud environments:

```bash
STORAGE_BACKEND=s3
S3_BUCKET=artifact-keeper
S3_REGION=us-east-1
S3_ENDPOINT=https://s3.amazonaws.com
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
```

Works with AWS S3, MinIO, DigitalOcean Spaces, and other S3-compatible services.

## Verification

```bash
# Health check (via Caddy)
curl http://localhost:30080/health

# Direct backend health check
curl http://localhost:8080/health

# Login
curl -X POST http://localhost:30080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin"}'
```

## Next Steps

- [Configuration Reference](/docs/getting-started/configuration) — All environment variables
- [Quickstart Guide](/docs/getting-started/quickstart) — Create your first repository
- [Docker Deployment](/docs/deployment/docker) — Production Docker Compose details
- [Package Formats](/docs/package-formats) — All supported formats and endpoints
